
[1mBeginning JFrog Artifactory setup[0m


[DEBUG] Method docker_doValidations

Validating System requirements
Docker version 19.03.8, build afacb8b7f0
docker-compose version 1.25.4, build 8d51620a

[DEBUG] All validations successful

[DEBUG] Method docker_hook_preUserInputs

[DEBUG] Method docker_getUserInputs

[DEBUG] Method wrapper_getUserInputs

[DEBUG] Method wrapper_createInstallerYaml

[DEBUG] Creating file: [/home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/installer.yaml]

[DEBUG] Method wrapper_setSystemValue

[DEBUG] Setting installer.node.ip with 127.0.1.1 in /home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/installer.yaml

[DEBUG] Method wrapper_setSystemValue

[DEBUG] Setting installer.ha with n in /home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/installer.yaml

[DEBUG] Method wrapper_setSystemValue

[DEBUG] Setting installer.install_postgresql with y in /home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/installer.yaml

[DEBUG] Method wrapper_setSystemValue

[DEBUG] Setting installer.install_elasticsearch with y in /home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/installer.yaml

[DEBUG] Method wrapper_hook_setInstallerDefaults

[DEBUG] Method wrapper_setSystemValue

[DEBUG] Setting installer.data_dir with /root/.jfrog/artifactory in /home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/installer.yaml

[DEBUG] Method docker_hook_setInstallerDefaults

[DEBUG] Method wrapper_hook_start_getUserInputs

[DEBUG] Method wrapper_askUser

Installation Directory (Default: /root/.jfrog/artifactory): 
[DEBUG] Setting installer.data_dir with ./volumes in /home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/installer.yaml

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[installer.data_dir]

[DEBUG] Method: wrapper_hook_start_getUserInputs. JF_ROOT_DATA_DIR is now [./volumes]

[DEBUG] Method docker_triggerMigration

Triggering migration script. This will migrate if needed and may take some time.

Migration logs will be available at [/home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/bin/migration.log]. The file will be archived at [./volumes/var/log] after installation

[DEBUG] Method docker_postMigration_hook

[DEBUG] Method _askForMandatoryInputs

[DEBUG] Method _getHostIpIfAvailable

[DEBUG] Method wrapper_askUser

Please specify the IP address of this machine (Default: 127.0.1.1): 
[DEBUG] Setting installer.node.ip with 172.17.0.1 in /home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/installer.yaml

[DEBUG] Method _getHAModeIfAvailable

[DEBUG] Method wrapper_askUser

Are you adding an additional node to an existing product cluster? [y/N]: 
[DEBUG] Setting installer.ha with n in /home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/installer.yaml

[DEBUG] Method wrapper_standalone_hook_getUserInputs (unimplemented)

[DEBUG] Method _askForExternalDBInputs

[DEBUG] Method _getDatabaseType

[DEBUG] Method _askPostgresDetails

[DEBUG] Method wrapper_askUser

The installer can install a PostgreSQL database, or you can connect to an existing compatible PostgreSQL database
(https://service.jfrog.org/installer/System+Requirements#SystemRequirements-RequirementsMatrix)
If you are upgrading from an existing installation, select N if you have externalized PostgreSQL, select Y if not.
Do you want to install PostgreSQL? [Y/n]: 
[DEBUG] Setting installer.install_postgresql with y in /home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/installer.yaml

[DEBUG] Method wrapper_hook_askExtraPostgresDetails (unimplemented)

[1;31m[WARN[0m[1;31m] [0mThe PostgreSQL database will be setup with default credentials. We recommend that you change at the earliest opportunity

[DEBUG] Method wrapper_hook_getUserInputs (unimplemented)

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[installer.data_dir]

[DEBUG] Method: docker_getUserInputs. JF_ROOT_DATA_DIR is now [./volumes]

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[installer.ha]

[DEBUG] Method: docker_getUserInputs. JF_NODE_TYPE is now [standalone]

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[shared.jfrogUrl]

[DEBUG] Method: docker_getUserInputs. JF_SHARED_JFROGURL is now []

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[shared.security.joinKey]

[DEBUG] Method: docker_getUserInputs. JF_SHARED_SECURITY_JOINKEY is now []

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[installer.install_postgresql]

[DEBUG] Method: docker_getUserInputs. IS_POSTGRES_REQUIRED is now [y]

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[installer.node.ip]

[DEBUG] Method: docker_getUserInputs. JF_SHARED_NODE_IP is now [172.17.0.1]

[DEBUG] Method docker_hook_getUserInputs_post

[DEBUG] No third party integration configured. Skipping invocation of 3rd party hook

[DEBUG] Method docker_updateFromYaml

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[installer.install_elasticsearch]

[DEBUG] Method docker_setupModeSpecificVar. IS_ELASTICSEARCH_REQUIRED is now [y]

[DEBUG] PROJECT_ROOT_FOLDER is [artifactory]

[DEBUG] Method docker_setDirInfo

[DEBUG] Root Directory being used is: ./volumes

[DEBUG] Method docker_hook_setDirInfo

[DEBUG] Method docker_createDirectories

[DEBUG] First setup. Setting FIRST_SETUP=true

[DEBUG] Method createDir invoked with [./volumes/var]

[DEBUG] Attempting to create ./volumes/var

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var]

[DEBUG] Method createDir invoked with [./volumes/var/etc]

[DEBUG] Attempting to create ./volumes/var/etc

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var/etc]

[DEBUG] Method createDir invoked with [./volumes/var/data]

[DEBUG] Attempting to create ./volumes/var/data

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var/data]

[DEBUG] Method createDir invoked with [./volumes/var/log]

[DEBUG] Attempting to create ./volumes/var/log

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var/log]

[DEBUG] Method createDir invoked with [./volumes/var/etc/security]

[DEBUG] Attempting to create ./volumes/var/etc/security

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var/etc/security]

[DEBUG] Method docker_hook_createDirectories

[DEBUG] Method createDir invoked with [./volumes/var]

[DEBUG] Attempting to create ./volumes/var

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var]

[DEBUG] Method createDir invoked with [./volumes/var/bootstrap]

[DEBUG] Attempting to create ./volumes/var/bootstrap

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var/bootstrap]

[DEBUG] Method createDir invoked with [./volumes/var/bootstrap/artifactory]

[DEBUG] Attempting to create ./volumes/var/bootstrap/artifactory

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var/bootstrap/artifactory]

[DEBUG] Method createDir invoked with [./volumes/var/bootstrap/artifactory/tomcat]

[DEBUG] Attempting to create ./volumes/var/bootstrap/artifactory/tomcat

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var/bootstrap/artifactory/tomcat]

[DEBUG] Method createDir invoked with [./volumes/var/bootstrap/artifactory/tomcat/lib]

[DEBUG] Attempting to create ./volumes/var/bootstrap/artifactory/tomcat/lib

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var/bootstrap/artifactory/tomcat/lib]

[DEBUG] Value of [FIRST_SETUP] is [true]

[DEBUG] Method io_setOwnership. Executing [chown -R 1030:1030 ./volumes]

[DEBUG] Method docker_setRootDirPermissions

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes]

[DEBUG] Method docker_createThirdPartyDir

Creating third party directories (if necessary)

[DEBUG] Method io_createPostgresDir

[DEBUG] Property [./volumes/var/data/postgres] exists. Proceeding

[DEBUG] Method createDir invoked with [./volumes/var/data/postgres/data]

[DEBUG] Attempting to create ./volumes/var/data/postgres/data

[DEBUG] Method io_setOwnership. Executing [chown -R 999:999 ./volumes/var/data/postgres]

[DEBUG] Method io_createNginxDir

[DEBUG] Property [./volumes/var/data/nginx] exists. Proceeding

[DEBUG] Method createDir invoked with [./volumes/var/data/nginx]

[DEBUG] Attempting to create ./volumes/var/data/nginx

[DEBUG] Method io_setOwnership. Executing [chown -R 104:107 ./volumes/var/data/nginx]

[DEBUG] Method io_createElasticSearchDir

[DEBUG] Method io_createRedisDir

[DEBUG] Method io_createMongoDir

[DEBUG] Method io_createRabbitMQDir

[DEBUG] Method docker_createSystemYaml

[DEBUG] Method docker_setSystemValue. Setting [shared.node.ip] to [./volumes/var/etc/system.yaml]

[DEBUG] Setting shared.node.ip with 172.17.0.1 in ./volumes/var/etc/system.yaml

[DEBUG] Method docker_setSystemValue. Setting [shared.node.id] to [./volumes/var/etc/system.yaml]

[DEBUG] Setting shared.node.id with radu in ./volumes/var/etc/system.yaml

[DEBUG] Method docker_setSystemValue. Setting [shared.node.name] to [./volumes/var/etc/system.yaml]

[DEBUG] Setting shared.node.name with radu in ./volumes/var/etc/system.yaml

[DEBUG] Method docker_setSystemValue. Setting [router.entrypoints.externalPort] to [./volumes/var/etc/system.yaml]

[DEBUG] Setting router.entrypoints.externalPort with 8082 in ./volumes/var/etc/system.yaml

[DEBUG] Method docker_setSystemValue. Setting [shared.database.type] to [./volumes/var/etc/system.yaml]

[DEBUG] Setting shared.database.type with postgresql in ./volumes/var/etc/system.yaml

[DEBUG] Method docker_setSystemValue. Setting [shared.database.driver] to [./volumes/var/etc/system.yaml]

[DEBUG] Setting shared.database.driver with org.postgresql.Driver in ./volumes/var/etc/system.yaml

[DEBUG] Method docker_installToSystemYaml

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[shared.database.url]

[DEBUG] Key: KEY_DATABASE_URL not applicable

[DEBUG] Method docker_installToSystemYaml

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[shared.database.username]

[DEBUG] Key: KEY_DATABASE_USERNAME not applicable

[DEBUG] Method docker_installToSystemYaml

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[shared.database.password]

[DEBUG] Key: KEY_DATABASE_PASSWORD not applicable

[DEBUG] Method docker_installToSystemYaml

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[shared.rabbitMq.active.node.name]

[DEBUG] Key: KEY_RABBITMQ_ACTIVE_NODE_NAME not applicable

[DEBUG] Method docker_installToSystemYaml

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[shared.rabbitMq.active.node.ip]

[DEBUG] Key: KEY_RABBITMQ_ACTIVE_NODE_IP not applicable

[DEBUG] Method docker_getSystemValue

[DEBUG] Method docker_getSystemValue. key:[shared.security.masterKey]

[DEBUG] Method docker_addToEnvFile

[DEBUG] Replacing [ROOT_DATA_DIR] in /home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/.env

[DEBUG] Replaced [ROOT_DATA_DIR=.*] with [ROOT_DATA_DIR=./volumes] in [/home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/.env]

[DEBUG] Method docker_hook_postSystemYamlCreation

[DEBUG] Method docker_setSystemValue. Setting [shared.node.contextUrl] to [./volumes/var/etc/system.yaml]

[DEBUG] Setting shared.node.contextUrl with http://127.0.1.1:8082/artifactory in ./volumes/var/etc/system.yaml

[DEBUG] Method _getDatabaseType

[DEBUG] Method docker_setSystemValue. Setting [shared.database.username] to [./volumes/var/etc/system.yaml]

[DEBUG] Setting shared.database.username with artifactory in ./volumes/var/etc/system.yaml

[DEBUG] Method docker_setSystemValue. Setting [shared.database.password] to [./volumes/var/etc/system.yaml]

[DEBUG] Setting shared.database.password with __sensitive_key_hidden___ in ./volumes/var/etc/system.yaml

[DEBUG] Method docker_setSystemValue. Setting [shared.database.url] to [./volumes/var/etc/system.yaml]

[DEBUG] Setting shared.database.url with jdbc:postgresql://127.0.1.1:5432/artifactory in ./volumes/var/etc/system.yaml

[DEBUG] Method io_setOwnership. Executing [chown -R 1030:1030 ./volumes/var/etc/system.yaml]

[DEBUG] Method docker_hook_copyComposeFile

[DEBUG] Method _getDatabaseType

[DEBUG] Copying [/home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/templates/docker-compose-postgres.yaml] as [/home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/docker-compose.yaml]

[DEBUG] Method docker_hook_setupThirdParty

[DEBUG] No third party integration configured. Skipping invocation of 3rd party hook

[DEBUG] Method docker_configureLogRotation

[DEBUG] Method _addLogRotateBinary

[DEBUG] Method configureLogRotation

[DEBUG] Configuring log rotation as user [1030], group [1030], effective cron User [root]

[DEBUG] Method createDir invoked with [./volumes]

[DEBUG] Attempting to create ./volumes

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes]

[DEBUG] Method createDir invoked with [./volumes/var]

[DEBUG] Attempting to create ./volumes/var

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var]

[DEBUG] Method createDir invoked with [./volumes/var/log]

[DEBUG] Attempting to create ./volumes/var/log

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var/log]

[DEBUG] Method createDir invoked with [./volumes/var/log/archived]

[DEBUG] Attempting to create ./volumes/var/log/archived

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var/log/archived]

[DEBUG] Method createDir invoked with [./volumes/var/etc]

[DEBUG] Attempting to create ./volumes/var/etc

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown 1030:1030 ./volumes/var/etc]

[DEBUG] Method createDir invoked with [./volumes/var/etc/logrotate]

[DEBUG] Attempting to create ./volumes/var/etc/logrotate

[DEBUG] Method io_setOwnershipNonRecursive. Executing [chown root:root ./volumes/var/etc/logrotate]

[DEBUG] Method createFile [./volumes/var/etc/logrotate/logrotate.conf]

[DEBUG] Method io_setOwnership. Executing [chown -R root:root ./volumes/var/etc/logrotate/logrotate.conf]

[DEBUG] Method _addLogRotateConfiguration

[DEBUG] Adding logrotate configuration for [./volumes/var/log/console.log] to [./volumes/var/etc/logrotate/logrotate.conf]

[DEBUG] Method _addCronJobForLogrotate

[DEBUG] Method removeLogRotation

[DEBUG] No third party integration configured. Skipping invocation of 3rd party hook

[DEBUG] Method docker_showSuccessMessage

[1mDocker setup complete[0m

Installation directory: [./volumes] contains data and configurations.

Use docker-compose commands to start the application. Once the application has started, it can be accessed at [http://127.0.1.1:8082]

[1mExamples:[0m
cd /home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2
start:          docker-compose -p rt up -d
stop:           docker-compose -p rt down

[1mNOTE:[0m The compose file uses several environment variables from the .env file. Remember to run from within the [/home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2] folder

[DEBUG] Method docker_cleanup

[DEBUG] Method wrapper_removeInstallerYaml

[DEBUG] Removing file: [/home/radugrecu97/CLionProjects/RC_Car/artifactory-cpp-ce-7.3.2/installer.yaml]
